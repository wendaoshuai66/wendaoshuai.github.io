(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{247:function(s,a,e){"use strict";e.r(a);var n=e(0),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"javascript-集成化测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#javascript-集成化测试"}},[s._v("#")]),s._v(" JavaScript 集成化测试")]),s._v(" "),e("h2",{attrs:{id:"有关好的文章地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#有关好的文章地址"}},[s._v("#")]),s._v(" 有关好的文章地址")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/hubvue/nota/issues/26",target:"_blank",rel:"noopener noreferrer"}},[s._v("JavaScript 与 QA 工程师(理论篇)"),e("OutboundLink")],1)]),s._v(" "),e("h2",{attrs:{id:"yarn-与-npm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#yarn-与-npm"}},[s._v("#")]),s._v(" yarn 与 npm")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://wendaoshuai66.github.io/study/note/images/yarn.png",alt:"yarn 与 npm"}})]),s._v(" "),e("h2",{attrs:{id:"单元测试-小的函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#单元测试-小的函数"}},[s._v("#")]),s._v(" 单元测试 小的函数")]),s._v(" "),e("p",[s._v("单元测试的测试框架有很多中，今天用的是"),e("a",{attrs:{href:"http://karma-runner.github.io/3.0/intro/installation.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("karma"),e("OutboundLink")],1),s._v("，还有一个是 React 推出的"),e("a",{attrs:{href:"https://jestjs.io/docs/en/getting-started",target:"_blank",rel:"noopener noreferrer"}},[s._v("jest"),e("OutboundLink")],1)]),s._v(" "),e("h3",{attrs:{id:"初始化项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始化项目"}},[s._v("#")]),s._v(" 初始化项目")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm init -y //-y 一直yes\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"下载-karma-包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载-karma-包"}},[s._v("#")]),s._v(" 下载 karma 包")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install karam –save-dev 或者 yarn add karam --dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"安装-karma-jasmine-和-jasmine-core-断言库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-karma-jasmine-和-jasmine-core-断言库"}},[s._v("#")]),s._v(" 安装 karma-jasmine 和 jasmine-core 断言库")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install karma-jasmine jasmine-core –save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"安装浏览器启动项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装浏览器启动项"}},[s._v("#")]),s._v(" 安装浏览器启动项")]),s._v(" "),e("p",[s._v("如果用无头浏览器的话会因为 PhantomJs 对 es6 支持不好会造成问题但正常的话可以用")]),s._v(" "),e("p",[s._v("步骤：npm install –save-dev karma-phantomjs-launcher(这个在 karma init 的时候会下载，可以先不下载，需要翻墙，代理服务器带宽不好的下载不下来。一个解决办法是整个好的代理服务器，二个解决办法是使用 cnpm 下载)")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install phantom –save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("因为 PhantomJs 对 es6 支持不好本次测试用的是 Chrome，需安装 Chrome 启动项")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install  karma-chrome-launcher --save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"初始化-karma-包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始化-karma-包"}},[s._v("#")]),s._v(" 初始化 karma 包")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("karma init\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("执行上面这个命令会有几个选项让选择")]),s._v(" "),e("p",[s._v("which testing framework do you want to use? (你想用什么测试框架) 我们选 jasmine。")]),s._v(" "),e("p",[s._v("Do you want to use Require.js ?（用 Require.js 吗） 按需求来选，如果用的话选 yes，不用的话选 no")]),s._v(" "),e("p",[s._v("Do you want to capture any browsers automatically ?（是否要进行浏览器的比较） 找浏览器执行 ceshi，这里是用的是 Chrome，因为 PhantomJs 对 es6 支持不好本次测试用的是 Chrome")]),s._v(" "),e("p",[s._v("What is tceshihe location of your source and test files ?（测试文件和原文件的位置在什么地方？？） 可选可不选，ceshi 可以自己配置。")]),s._v(" "),e("p",[s._v("Should anceshiy of the files included by the previous patterns be excluded ?（是否要有一些其他文件被包含）ceshi 可选可不选，ceshi 这里不选")]),s._v(" "),e("p",[s._v("Do you waceshint Karma to watch all the files and run the tests on change ?（你想让 Karma 监视所有的文件并运行变更测 ceshi 试吗？） 可选可不选，这里不选")]),s._v(" "),e("p",[s._v("安装完成之后，会生成 karma.vonf.js 文件，这个就是 karma 的配置文件。")]),s._v(" "),e("h3",{attrs:{id:"karma-配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#karma-配置文件"}},[s._v("#")]),s._v(" karma 配置文件")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("module.exports = function(config) {\n  config.set({\n\n       basePath: '',//基本路径\n\n       frameworks: ['jasmine'],\n\t\t//需要添加测试文件\n\t    files: [\n\t\t  \"./tests/unit/**/*.js\",\n\t\t  \"./tests/unit/**/*.spec.js\"\n\t\t],\n\n    exclude: [\n    ],\n\n\n    // preprocess matching files before serving them to the browser\n    // available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor\n    preprocessors: {\n      './tests/unit/**/*.js': ['coverage']\n    },\n    //代码覆盖率文档生成的路径\n    coverageReporter: {\n      type : 'html',\n      dir : './docs/coverage/'\n    },\n\n    //生成测试报表的过程\n    reporters: ['progress', 'coverage'],\n\n\n    // web server port\n    port: 9876,\n\n\n    // enable / disable colors in the output (reporters and logs)\n    colors: true,\n\n\n    // level of logging\n    // possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG\n    logLevel: config.LOG_INFO,\n\n\n    // enable / disable watching file and executing tests whenever any file changes\n    autoWatch: false,\n\n\n    // start these browsers\n    // available browser launchers: https://npmjs.org/browse/keyword/karma-launcher\n    browsers: ['Chrome'],\n\n\n    // Continuous Integration mode\n    // if true, Karma captures browsers, runs the tests and exits\n    singleRun: false,\n\n    // Concurrency level\n    // how many browser should be started simultaneous\n    concurrency: Infinity\n  })\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br")])]),e("p",[s._v("frameworks：是指测试所用到的断言库是什么，我用的是 jasmine。")]),s._v(" "),e("p",[s._v("files：是需要测试的文件，配置两中，一种是需要测试的文件，一种是测试文件(.spec.js 结尾)。主要**是所有的文件夹， *是所有的文件。")]),s._v(" "),e("p",[s._v("preprocessors：这个是指定什么文件生成报表文件。")]),s._v(" "),e("p",[s._v("reporters：以什么样的方式生成报表。")]),s._v(" "),e("p",[s._v("coverageReporter：生成报表的形式和路径。")]),s._v(" "),e("p",[s._v("browsers：指定测试用到的浏览器，这里用 PhantomJS 无头浏览器。")]),s._v(" "),e("p",[s._v("singleRun：如果上面 browsers 指定的是 PhantomJS，这里要改为 true。")]),s._v(" "),e("h3",{attrs:{id:"开始需要添加的配置–指定测试文件的路径"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开始需要添加的配置–指定测试文件的路径"}},[s._v("#")]),s._v(" 开始需要添加的配置–指定测试文件的路径")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(' files: [\n\t\t  "./tests/unit/**/*.js",\n\t\t  "./tests/unit/**/*.spec.js"\n\t\t],\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"编写测试用例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编写测试用例"}},[s._v("#")]),s._v(" 编写测试用例")]),s._v(" "),e("p",[s._v("假设我们测试一下代码")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("window.add = (a)=>{\n    if(a===1){\n        return 1\n    }else{\n        return a+1;\n    }\n    \n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("测试用例这样写")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("describe('测试基本函数函数API',function(){\n    it('+1的函数应用',function(){\n        expect(window.add(1)).toBe(1)\n        // expect(window.add(2)).toBe(3)\n    })\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("describe：整个项目的描述")]),s._v(" "),e("p",[s._v("it:是每一个测试用例")]),s._v(" "),e("p",[s._v("expect：是断言")]),s._v(" "),e("p",[s._v("toBe：直接的结果与谁相比")]),s._v(" "),e("h3",{attrs:{id:"启动测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动测试"}},[s._v("#")]),s._v(" 启动测试")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("karma start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("测试成功的话是绿色的显示 SUCCESS")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://wendaoshuai66.github.io/study/note/images/karmas.jpeg",alt:"karma成功"}})]),s._v(" "),e("p",[s._v("测试失败的话会报错。")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://wendaoshuai66.github.io/study/note/images/karmae.jpeg",alt:"karma成功"}})]),s._v(" "),e("p",[s._v("###代码的覆盖率检查")]),s._v(" "),e("p",[s._v("当测试代码用有 ifelse 的时候，测试用例中只写一个测试是达不到完成测试的，就上面测试代码而言。我们用代码的覆盖率检查来检测一下。")]),s._v(" "),e("p",[s._v("覆盖率检查通过 karma-coverage 来完成")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install karma-coverage –save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("在 karma.conf.js 中修改 设置以 coverage 的方式生成报表")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("reporters: ['progress','coverage'],\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("设置处理的文件")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("preprocessors: {\n    \"unit/**/*.js\":['coverage']\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("文档生成的位置 在目录下设置 docs 文件夹存放报表文件")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" coverageReporter: {\n      type : 'html',\n      dir : './docs/coverage/'\n    },\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("此时生成的报表文件")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://wendaoshuai66.github.io/study/note/images/reports.png",alt:"报表成功"}})]),s._v(" "),e("p",[s._v("可以看到 Branches 是 50%，说明只能测试到了 50%的代码 我们修改测试代码")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\ndescribe('测试基本函数函数API',function(){\n    it('+1的函数应用',function(){\n        expect(window.add(1)).toBe(2)\n        expect(window.add(2)).toBe(3)\n    })\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h3",{attrs:{id:"此时的测试用例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#此时的测试用例"}},[s._v("#")]),s._v(" 此时的测试用例")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://wendaoshuai66.github.io/study/note/images/reporte.png",alt:"报表成功100%"}})]),s._v(" "),e("h2",{attrs:{id:"功能测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#功能测试"}},[s._v("#")]),s._v(" 功能测试")]),s._v(" "),e("h3",{attrs:{id:"e2e-测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#e2e-测试"}},[s._v("#")]),s._v(" e2e 测试")]),s._v(" "),e("p",[s._v("e2e 主要测浏览器的功能测试 e2e 主要使用的是 selenium-webdriver，这里是它其他的一些方法 API")]),s._v(" "),e("h3",{attrs:{id:"安装-selenium-webdriver"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-selenium-webdriver"}},[s._v("#")]),s._v(" 安装 selenium-webdriver")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install selenium-webdriver –save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("selenium-webdriver 通过自动启动浏览器进行 e2e 测试，因此必须要安装浏览器驱动程序。 在这里下载各大浏览器的驱动程序，把下载好的驱动程序解压下来放在项目根路径下就可以了。")]),s._v(" "),e("h3",{attrs:{id:"测试流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试流程"}},[s._v("#")]),s._v(" 测试流程")]),s._v(" "),e("p",[s._v("比如说我们要测试百度的 input 框输入内容之后跳转的相应的界面中的 title 值。 在项目根目录中创建 e2e 文件夹，创建 baidu.spec.js 文件，这个 baidu.spec.js 文件就是测试文件。测试文件中代码如下。")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const {Builder, By, Key, until} = require('selenium-webdriver');\n(async function example() {\n    //一定要下载相对应浏览器的执行驱动\n    //forBrowser里就是指定用什么样的浏览器进行测试。\n    let driver = await new Builder().forBrowser('firefox').build();\n    try {\n        //需要测试网站的url\n        await driver.get('http://www.baidu.com');\n        //name()表示找到页面中input的name值\n        //sendKeys的第一个值表示自动化在文本框中输入的内容\n        //第二个值Key.RETURN  表示按回车\n        await driver.findElement(By.name('q')).sendKeys('Hello', Key.RETURN);\n        //匹配自动化搜索后出现的数据\n        //数字1000就是测试需要等待的时间，如果网慢，可以调大一些。\n        await driver.wait(until.titleIs('Hello_百度搜索'), 1000);\n    } finally {\n        //系统要退出\n        await driver.quit();\n    }\n})();\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("p",[s._v("特别注意的是最后 driver.quit()，系统一定要退出，如果不退出的话，就会堵塞后面的加载。")]),s._v(" "),e("h3",{attrs:{id:"启动测试-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动测试-2"}},[s._v("#")]),s._v(" 启动测试")]),s._v(" "),e("p",[s._v("selenium-webdriver 是基于 node 的语法，因此执行")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("node ./e2e/*.spec.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("就可以启动测试")]),s._v(" "),e("p",[s._v("nightwatch 也是做 e2e 测试的一个框架，这里先不说，以后用这个做 e2e。")]),s._v(" "),e("h3",{attrs:{id:"用-rize-来做-e2e-测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用-rize-来做-e2e-测试"}},[s._v("#")]),s._v(" 用 rize 来做 e2e 测试")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://rize.js.org/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[s._v("rize.js"),e("OutboundLink")],1),s._v("是一个新出的测试框架，在这里检测一下 e2e 测试。 与 rize.js 配合的是一个新出的无头浏览器 puppeteer，它和 selenium-webdriver 不同的是它不需要打开浏览器去测试。")]),s._v(" "),e("p",[s._v("rize.js 实际上是对 puppeteer 的一个高度封装")]),s._v(" "),e("h3",{attrs:{id:"安装-rize-和-puppeteer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-rize-和-puppeteer"}},[s._v("#")]),s._v(" 安装 rize 和 puppeteer")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install –save-dev puppeteer rize(必须科学上网装)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"测试用例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试用例"}},[s._v("#")]),s._v(" 测试用例")]),s._v(" "),e("p",[s._v("和 selenium-webdriver 一样，我们假设测试 giuhub 网站，输入 node 会不会出现 Node.js 这几个字。（注意的是 rize 搜索是全页面的搜索，因此会慢些）。 在 e2e 文件夹下创建 github.spec.js")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const Rize = require(\"rize\");\nconst rize = new Rize();\nrize\n    .goto('https://github.com/')        //打开url\n    .type('input.header-search-input', 'node')  //找到文本框 输入文本\n    .press('Enter')        //进行回车\n    .waitForNavigation()    //等待\n    .assertSee('Node.js')   \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("可见上述用例在语法上就比较简洁，容易看懂。")]),s._v(" "),e("h3",{attrs:{id:"启动测试-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动测试-3"}},[s._v("#")]),s._v(" 启动测试")]),s._v(" "),e("p",[s._v("rize 是基于 node 的语法，因此执行")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("node ./e2e/*.spec.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"接口测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#接口测试"}},[s._v("#")]),s._v(" 接口测试")]),s._v(" "),e("p",[s._v("前端接口测试一般用测自己，测自己的 node 接口。 在项目根目录下创建 service 文件夹和 mochaRunner.js 文件。")]),s._v(" "),e("p",[s._v("1.service 文件夹主要放测试同步接口的测试文件。")]),s._v(" "),e("p",[s._v("2.mochaRunner.js 主要用于测试异步接口。")]),s._v(" "),e("h3",{attrs:{id:"测试框架"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试框架"}},[s._v("#")]),s._v(" 测试框架")]),s._v(" "),e("p",[s._v("使用 mocha 进行接口测试")]),s._v(" "),e("h3",{attrs:{id:"安装-mocha"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-mocha"}},[s._v("#")]),s._v(" 安装 mocha")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install mocha –save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"测试流程-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试流程-2"}},[s._v("#")]),s._v(" 测试流程")]),s._v(" "),e("p",[s._v("我们自己写一段 express 代码,自测一下。\n强烈建议将 Nodemon 安装为 dev 依赖项，这是一个非常简单的小包，可在文件被更改时自动重启服务器")]),s._v(" "),e("p",[s._v("如果你运行")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cnpm install --save-dev nodemon\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后将以下脚本添加到 package.json")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('//package.json\n"scripts": {\n    "dev": "nodemon ./tests/service/service.js"\n  }\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('const express = require("express");\nconst app = express();\napp.get("/test",(req,res) => {\n    res.send({\n        result : "hello world",\n    })\n})\napp.listen(3000,()=>{\n    console.log("server is running");\n})\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("在 service 文件夹下，创建 router.spec.js 用于测试上述接口。 注意的是 router.spec.js 中的测试代码和 karma 单元测试中的测试代码风格相同。唯一不同的是，接口测试是跑在 node 服务上的必须把进程 done 掉，不然会阻塞执行。 下面是测试代码")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('\nconst axios = require("axios");\ndescribe("node接口测试",function(){\n    it("test接口测试",function(done){\n        axios.get("192.168.0.101:3000/test").then(function(response){\n            if(response.data.result == \'hello world\'){\n                console.log(response)\n                //必须要done\n                done();\n            }else {\n                done(new Error("请求接口数据出错"));\n            }\n        }).catch(function(error){\n            done(error);\n        })\n    })\n})\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("p",[s._v("在 mochaRunner.js 中编写异步测试")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const Macha=require('mocha')\nconst mocha = new Macha({\n    reporter: 'mochawesome',\n    reporterOptions: {\n        reportDir: './docs/mochawesome-report',\n      }\n});\nmocha.addFile('./tests/service/routes.spec.js');\nmocha.run(function(){\n    console.log(done)\n    process.exit()\n    // process.exit(1) 异常\n    // process.exit()  正常\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h3",{attrs:{id:"生成测试报表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生成测试报表"}},[s._v("#")]),s._v(" 生成测试报表")]),s._v(" "),e("p",[s._v("使用 mochawesome 生成测试报表")]),s._v(" "),e("h3",{attrs:{id:"安装-mochawesome"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-mochawesome"}},[s._v("#")]),s._v(" 安装 mochawesome")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install mochawesome –save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("在 mochaRunner.js 中配置")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const mocha = new Macha({\n    reporter: 'mochawesome',\n    reporterOptions: {\n        reportDir: './docs/mochawesome-report',\n      }\n});\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("这样就可以生成测试报表。")]),s._v(" "),e("h3",{attrs:{id:"启动测试-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动测试-4"}},[s._v("#")]),s._v(" 启动测试")]),s._v(" "),e("p",[s._v("首先开启服务器")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\nnpm run dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("mocha 是基于 node 的语法，因此执行")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("node ./mochaRunner.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"测试结果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试结果"}},[s._v("#")]),s._v(" 测试结果")]),s._v(" "),e("p",[s._v("代码中会返回一个出错长度，如果出错长度为 0 的话就不是出错，如果出错长度不为 0 就是出错了。")]),s._v(" "),e("p",[s._v("正确的测试结果")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://wendaoshuai66.github.io/study/note/images/mochas.png",alt:"报表成功100%"}})]),s._v(" "),e("p",[s._v("错误的测试结果")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://wendaoshuai66.github.io/study/note/images/mochae.png",alt:"报表成功100%"}})]),s._v(" "),e("h2",{attrs:{id:"ui-测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ui-测试"}},[s._v("#")]),s._v(" UI 测试")]),s._v(" "),e("h4",{attrs:{id:"什么是-ui-走查"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是-ui-走查"}},[s._v("#")]),s._v(" 什么是 UI 走查")]),s._v(" "),e("p",[s._v("把对应生成的页面看，看过之后比对是否还原 UI 图正确，还原对了就让上线，没有还原对就不让上线。 最早的 UI 走查就是 Phantom 的妹妹 "),e("a",{attrs:{href:"https://github.com/HuddleEng/PhantomCSS",target:"_blank",rel:"noopener noreferrer"}},[s._v("phantom-css"),e("OutboundLink")],1)]),s._v(" "),e("h3",{attrs:{id:"ui-测试框架-backstopjs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ui-测试框架-backstopjs"}},[s._v("#")]),s._v(" UI 测试框架 backstopJS")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install backstopjs –save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"初始化-backstopjs-项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始化-backstopjs-项目"}},[s._v("#")]),s._v(" 初始化 backstopJS 项目")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("backstop init\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("初始化之后，出现了几个配置文件")]),s._v(" "),e("p",[s._v("backstop.json 是配置文件")]),s._v(" "),e("p",[s._v("backstop_data 是 backstop 的引擎")]),s._v(" "),e("p",[s._v("cookies.json：如果网站中需要 cookie 登录的话，可以在这里模拟 cookie")]),s._v(" "),e("p",[s._v("casper：主要在无头浏览器中进行操作")]),s._v(" "),e("p",[s._v("chromy：对 chrome 版本的内核的一些操作")]),s._v(" "),e("p",[s._v("puppet")]),s._v(" "),e("h3",{attrs:{id:"backstop-json-配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#backstop-json-配置文件"}},[s._v("#")]),s._v(" backstop.json 配置文件")]),s._v(" "),e("p",[s._v("设置页面分辨率，可同时设置好几个。")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('\n"viewports": [\n    {\n    "label": "phone",\n    "width": 375,\n    "height": 667\n    },\n    {\n    "label": "ipad",\n    "width": 1024,\n    "height": 768\n    }\n],\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("配置每一个测试用例")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('\n"scenarios": [\n    {\n    "label": "QQmap",\n    "cookiePath": "backstop_data/engine_scripts/cookies.json",//如果网站中有登录cookie，必须在这里指定cookie\n    "url": "https://map.qq.com/m/", //这里是测试的网站\n    "referenceUrl": "",\n    "readyEvent": "",\n    "readySelector": "",\n    "delay": 0,\n    "hideSelectors": [],\n    "removeSelectors": [],\n    "hoverSelector": "",\n    "clickSelector": "",\n    "postInteractionWait": 0,\n    "selectors": [],\n    "selectorExpansion": true,\n    "expect": 0,\n    "misMatchThreshold" : 0.1,\n    "requireSameDimensions": true\n    }\n],\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("p",[s._v("由于 backstopJS 测试是进行的 UI 走查的环节，必须指定设计图，把参考文件放在”backstop_data/bitmaps_reference”文件夹下，可在 backstop.json 中 paths 下面的 bitmaps_reference 设置。")]),s._v(" "),e("p",[s._v("注意：backstop.json 中 viewports 中写了几个视图就要匹配几种参考图片")]),s._v(" "),e("h3",{attrs:{id:"启动测试-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动测试-5"}},[s._v("#")]),s._v(" 启动测试")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("backstop test\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"测试结果-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试结果-2"}},[s._v("#")]),s._v(" 测试结果")]),s._v(" "),e("p",[s._v("会生成一个报表，自动打开网页，网页里会形成测试网页与设计图的匹配。查看测试结果。")]),s._v(" "),e("h2",{attrs:{id:"最后的希望-集成化测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#最后的希望-集成化测试"}},[s._v("#")]),s._v(" 最后的希望-集成化测试")]),s._v(" "),e("p",[s._v("利用 pachage.json 串行和并行执行命令的方式集成化测试")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('   //串行\n  "scripts": {\n    "unit": "karma start",\n    "e2e": "node ./tests/e2e/baidu.spec.js",\n    "dev": "nodemon ./tests/service/service.js",\n    "service": "node ./mocharun.js",\n    "ui":"backstop test",\n    "test":"npm run unit && npm run e2e && npm run service && npm run ui"\n  },\n  \n  //并行\n  "scripts": {\n    "unit": "karma start",\n    "e2e": "node ./tests/e2e/baidu.spec.js",\n    "dev": "nodemon ./tests/service/service.js",\n    "service": "node ./mocharun.js",\n    "ui":"backstop test",\n    "test":"npm run unit & npm run e2e & npm run service & npm run ui"\n  },\n  \n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("p",[s._v("由此可见 上述 test 方式太过繁琐，我们通过一个工具简化一下，这个工具就是 npm-run-all")]),s._v(" "),e("h3",{attrs:{id:"安装-npm-run-all"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-npm-run-all"}},[s._v("#")]),s._v(" 安装 npm-run-all")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install npm-run-all –save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")]),s._v(" 使用")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('\n"test": "npm-run-all  unit  e2e  ui  service",\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("上面这种方式不是并发执行 如果有，某一步出错，就会终止。可以加一个参数让它变成并发执行")]),s._v(" "),e("div",{staticClass:"language-plain line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('"test": "npm-run-all --parallel   unit  e2e  ui  service",\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);